{"version":3,"sources":["services/api.js","components/Searchbar.js","components/ImageGalleryItem.js","components/Button.js","components/ImageGallery.js","components/Modal.js","components/Loader.js","App.js","index.js"],"names":["FetchApi","base_url","api_key","this","_value","_page","value","a","url","page","axios","get","result","data","hits","message","Searchbar","state","handleChange","e","setState","target","toLowerCase","handleSubmit","preventDefault","trim","toast","error","props","clearRender","onSubmit","className","type","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","onClickGalleryItem","onClose","largeImageURL","onClick","src","webformatURL","alt","id","Button","ImageGallery","arr","handleClick","map","length","modalRoot","document","querySelector","Modal","handleKeyDown","code","handleOverlayClick","currentTarget","window","addEventListener","removeEventListener","createPortal","LoaderSpin","color","height","width","timeout","newFetchApi","App","status","showModal","windowScroll","scrollTo","top","documentElement","scrollHeight","behavior","checkLengthArr","warn","handleSubmitForm","toggleModal","incrementPage","searchImages","then","prev","catch","err","console","log","prevState","prevProps","resetPage","theme","autoClose","Loader","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8fdf7015.chunk.js","sourcesContent":["import axios from 'axios';\n\nexport class FetchApi {\n  constructor(base_url, api_key) {\n    this.base_url = base_url;\n    this.api_key = api_key;\n    this._value = '';\n    this._page = 1;\n  }\n  get value() {\n    return this._value;\n  }\n  set value(value) {\n    return (this._value = value);\n  }\n  get page() {\n    return this._page;\n  }\n  set page(value) {\n    return (this._page += value);\n  }\n  incrementPage() {\n    return (this._page += 1);\n  }\n  resetPage() {\n    return (this._page = 1);\n  }\n\n  async searchImages() {\n    let url = `${this.base_url}?q=${this.value}&page=${this.page}&key=${this.api_key}&image_type=photo&orientation=horizontal&per_page=12`;\n    try {\n      const result = await axios.get(url);\n      const data = result.data.hits;\n      return data;\n    } catch (err) {\n      return err.message;\n    }\n  }\n}\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\n\nclass Searchbar extends Component {\n  state = {\n    value: '',\n  };\n\n  handleChange = e => {\n    this.setState({ value: e.target.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    if (this.state.value.trim() === '') {\n      toast.error('Введите корректное название!');\n      this.props.clearRender();\n      return;\n    }\n\n    this.props.onSubmit(this.state.value);\n    this.setState({ value: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            value={this.state.value}\n            onChange={this.handleChange}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import { Component } from 'react';\n\nclass ImageGalleryItem extends Component {\n  onClickGalleryItem = () => {\n    this.props.onClose(this.props.largeImageURL);\n  };\n\n  render() {\n    return (\n      <li className=\"ImageGalleryItem\" onClick={this.onClickGalleryItem}>\n        <img\n          src={this.props.webformatURL}\n          alt={this.props.id}\n          className=\"ImageGalleryItem-image\"\n        />\n      </li>\n    );\n  }\n}\n\nexport default ImageGalleryItem;\n","import { Component } from 'react';\n\nclass Button extends Component {\n  render() {\n    return (\n      <div className=\"Button-div\">\n        <button className=\"Button\" type=\"button\" onClick={this.props.onClick}>\n          LoadMore\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default Button;\n","import { Component } from 'react';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Button from './Button';\n\nclass ImageGallery extends Component {\n  render() {\n    const { arr, onClose, handleClick } = this.props;\n    return (\n      <>\n        <ul className=\"ImageGallery\">\n          {arr.map(({ id, webformatURL, largeImageURL }) => (\n            <ImageGalleryItem\n              key={id}\n              webformatURL={webformatURL}\n              largeImageURL={largeImageURL}\n              onClose={onClose}\n            />\n          ))}\n        </ul>\n        {arr.length % 12 === 0 && <Button onClick={handleClick} />}\n      </>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleOverlayClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { largeImageURL } = this.props;\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleOverlayClick}>\n        <div className=\"Modal\">\n          <img src={largeImageURL} alt={largeImageURL} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nclass LoaderSpin extends Component {\n  render() {\n    return (\n      <Loader\n        type=\"Circles\"\n        color=\"#3f51b5\"\n        height={100}\n        width={100}\n        timeout={3000}\n      />\n    );\n  }\n}\n\nexport default LoaderSpin;\n","import './App.css';\nimport './components/styles.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport { toast } from 'react-toastify';\nimport { FetchApi } from './services/api';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Modal from './components/Modal';\nimport LoaderSpin from './components/Loader';\n\nconst base_url = `https://pixabay.com/api/`;\nconst api_key = `23089683-10e6383e94187ff47334541d4`;\nconst newFetchApi = new FetchApi(base_url, api_key);\n\nclass App extends Component {\n  state = {\n    value: '',\n    arr: [],\n    status: 'idle',\n    showModal: false,\n    largeImageURL: '',\n  };\n\n  componentDidUpdate(prevState, prevProps) {\n    if (prevProps.value !== this.state.value) {\n      this.setState({ status: 'pending' });\n      newFetchApi.resetPage();\n      newFetchApi.value = this.state.value;\n      newFetchApi\n        .searchImages()\n        .then(data => {\n          this.setState({ arr: data });\n          this.checkLengthArr();\n        })\n        .catch(err => {\n          console.log(err);\n          this.setState({ status: 'error' });\n        });\n    }\n    this.windowScroll();\n  }\n\n  windowScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  checkLengthArr = () => {\n    if (this.state.arr.length !== 0) {\n      this.setState({ status: 'resolved' });\n      return;\n    }\n    toast.warn('Изображений с таким названием, к сожалению, нет');\n    this.setState({ status: 'idle' });\n  };\n\n  handleSubmitForm = value => {\n    this.setState({ value });\n  };\n\n  toggleModal = largeImageURL => {\n    this.setState(state => ({\n      showModal: !state.showModal,\n      largeImageURL: largeImageURL,\n    }));\n  };\n\n  clearRender = () => {\n    this.setState({ status: 'idle' });\n  };\n\n  handleClick = () => {\n    newFetchApi.incrementPage();\n    newFetchApi\n      .searchImages()\n      .then(data => {\n        this.setState(prev => ({\n          arr: [...prev.arr, ...data],\n          status: 'resolved',\n        }));\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ status: 'error' });\n      });\n\n    console.log('сработал handleClick');\n  };\n\n  render() {\n    const { arr, status, value, showModal, largeImageURL } = this.state;\n    const { handleSubmitForm, clearRender, handleClick, toggleModal } = this;\n\n    return (\n      <div>\n        <Searchbar onSubmit={handleSubmitForm} clearRender={clearRender} />\n        <ToastContainer theme=\"colored\" autoClose={2000} />\n\n        {status === 'idle' && <p>Начните поиск изображений</p>}\n\n        {status === 'pending' && (\n          <div className=\"Loader\">\n            <LoaderSpin />\n          </div>\n        )}\n\n        {status === 'resolved' && (\n          <ImageGallery\n            arr={arr}\n            handleClick={handleClick}\n            onClose={toggleModal}\n          />\n        )}\n\n        {showModal && (\n          <Modal\n            value={value}\n            onClose={this.toggleModal}\n            largeImageURL={largeImageURL}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'modern-normalize/modern-normalize.css';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}